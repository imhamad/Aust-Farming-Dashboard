jQuery(document).ready(function(e){var a=[];e(".resumes:not(:parent.sidebar)").on("update_results",function(r,t,s){var n="",i=e(this),o=e(".resume_filters"),l="h2.showing_jobs",u=e("ul.resumes"),d=i.data("per_page"),_=i.data("orderby"),m=i.data("order"),g=i.data("featured"),c=e("div.resumes").index(this),h=e(".listings-loader");a[c]&&a[c].abort(),s?e(".load_more_resumes",i).addClass("loading"):(e(u).addClass("loading"),e(h).fadeIn());var p=o.find(':input[name^="search_categories"]').map(function(){return e(this).val()}).get(),f="",v="",x=e(':input[name="search_keywords"]'),y=o.find(':input[name="search_location"]');x.val()!=x.attr("placeholder")&&(f=x.val()),y.val()!=y.attr("placeholder")&&(v=y.val());var n={action:"resume_manager_get_resumes",search_keywords:f,search_location:v,search_categories:p,per_page:d,orderby:_,order:m,page:t,featured:g,show_pagination:i.data("show_pagination"),form_data:o.serialize()};a[c]=e.ajax({type:"POST",url:resume_manager_ajax_filters.ajax_url,data:n,success:function(a){if(a)try{a.indexOf("<!--WPJM-->")>=0&&(a=a.split("<!--WPJM-->")[1]),a.indexOf("<!--WPJM_END-->")>=0&&(a=a.split("<!--WPJM_END-->")[0]);var r=e.parseJSON(a);r.showing?(e(l).show().html(r.showing),e(".sidebar .job_filters_links").html(r.showing_links)):(e(l).html(resume_manager_ajax_filters.showing_all),e(".sidebar .job_filters_links").hide()),r.html&&(s?e(u).append(r.html):e(u).html(r.html)),1==i.data("show_pagination")?(i.find(".job-manager-pagination").remove(),r.pagination&&i.append(r.pagination)):(r.found_resumes&&r.max_num_pages!==t?e(".load_more_resumes",i).show().data("page",t):e(".load_more_resumes",i).hide(),e(".load_more_resumes",i).removeClass("loading"),e("li.resume",u).css("visibility","visible")),e(u).removeClass("loading"),e(h).fadeOut(),i.triggerHandler("updated_results",r)}catch(e){console.log(e)}}})});var r=parseInt(resume_manager_ajax_filters.rate_min,10),t=parseInt(resume_manager_ajax_filters.rate_max,10);e("#rate-range").slider({range:!0,min:parseInt(resume_manager_ajax_filters.rate_min,10),max:parseInt(resume_manager_ajax_filters.rate_max,10),values:[r,t],step:1,slide:function(a,r){e("input#rate_amount").val(r.values[0]+"-"+r.values[1]),e(".rate_amount .from").text(resume_manager_ajax_filters.currency+r.values[0]),e(".rate_amount .to").text(resume_manager_ajax_filters.currency+r.values[1])}}),e(".rate_amount .from").text(resume_manager_ajax_filters.currency+e("#rate-range").slider("values",0)),e(".rate_amount .to").text(resume_manager_ajax_filters.currency+e("#rate-range").slider("values",1)),e("input#rate_amount").val(e("#rate-range").slider("values",0)+"-"+e("#rate-range").slider("values",1)),e("#search_keywords, #search_radius, .radius_type, #search_location, #search_categories, #search_skills, .filter_by_check").change(function(){var a=e("div.resumes");a.triggerHandler("update_results",[1,!1])}).change().on("keyup",function(a){13===a.which&&e(this).trigger("change")}),e(".filter_by_check").change(function(a){e(this).parents(".widget").find(".widget_range_filter-inside").toggle()}),e("#rate-range").on("slidestop",function(a,r){var t=e("div.resumes");t.triggerHandler("update_results",[1,!1])}),e(".resume_filters").on("click",".reset",function(){var a=e("div.resumes"),r=e(this).closest("form");return r.find(':input[name="search_keywords"]').not(':input[type="hidden"]').val(""),r.find(':input[name="search_location"]').not(':input[type="hidden"]').val(""),r.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val(0).trigger("chosen:updated"),a.triggerHandler("reset"),a.triggerHandler("update_results",[1,!1]),!1}),e(".load_more_resumes").click(function(){var a=e(this).closest("div.resumes"),r=e(this).data("page");return r=r?parseInt(r):1,e(this).data("page",r+1),a.triggerHandler("update_results",[r+1,!0]),!1}),e("div.resumes").on("click",".job-manager-pagination a",function(){var a=e(this).closest("div.resumes"),r=e(this).data("page");return a.triggerHandler("update_results",[r,!1]),e("body, html").animate({scrollTop:a.offset().top-40},600),!1}),e.isFunction(e.fn.chosen)&&e('select[name^="search_categories"]').chosen()});